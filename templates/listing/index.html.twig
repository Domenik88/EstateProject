{% extends 'base.html.twig' %}

{% block title %}Hello ListingController!{% endblock %}

{% block body %}
    {% include 'layouts/common/breadcrumbs.html.twig' %}

    {% include 'layouts/sections/listing-page-intro.html.twig' %}

    {% embed 'layouts/containers/content-with-sticky-menu.html.twig' %}
        {% block col_left %}
            {% include 'layouts/sections/property-details.html.twig' with {
                description: listing.description,
                list: {
                    location: listing.address,
                    metrics: listing.metrics,
                    financials: listing.financials,
                },
                containerMod: '',
            } only %}

            {% include 'layouts/sections/neighborhood-info.html.twig' with {
                description: listing.listingSeo.description,
                containerMod: '',
            } only %}

            {% include 'layouts/sections/local-info.html.twig' with {
                containerMod: '',
                coordinates: listing.coordinates
            } only %}

            {% include 'layouts/sections/mortgage-calculator.html.twig' with {
                wrapMod: '',
                containerMod: '',
                homePrice: listing.financials.listingPrice
            } only %}
        {% endblock %}

        {% block col_right %}
            {% include 'layouts/modules/agent.html.twig' with {
                confidentiality: true,
                confidentialityCollapse: true,
                agentPhoto: listing.agent.agentPhoto,
                agentName: listing.agent.agentName,
                agencyName: listing.agent.agencyName,
                agentPhone: listing.agent.agentPhone,
                listingId: listing.listingId,
            } only %}
        {% endblock %}
    {% endembed %}

    {% if similarListings is not empty %}
        {% include 'layouts/sections/slider-section.html.twig' with {
            title: 'Similar nearby listings',
            slides: similarListings,
            wrapMod: 'mb100'
        } only %}
    {% endif %}

    {% include 'layouts/sections/book-a-tour.html.twig' with {
        listingId: listing.listingId
    } only %}
    {% include 'layouts/sections/mls-note.html.twig' %}

    {% include 'layouts/popups/popup-overlay.html.twig' %}
    {% include 'layouts/popups/map-popup.html.twig' %}

    {% include 'layouts/popups/listing-popup.html.twig' with {
        agent: listing.agent,
        images: listing.images,
        coordinates: listing.coordinates,
    } only %}

    {% include 'layouts/popups/listing-print-popup.html.twig' with {
        address: listing.address,
        image: listing.images[0],
        agent: listing.agent,
        description: listing.description,
        metrics: listing.metrics,
        financials: listing.financials,
        mlsNumber: listing.mlsNumber,
        type: listing.type,
        coordinates: listing.coordinates,
    } only %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('map') }}
{% endblock %}